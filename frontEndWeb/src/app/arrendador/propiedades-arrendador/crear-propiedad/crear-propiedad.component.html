<div class="container">
  <h2>Agregar Propiedad</h2>

  <form (ngSubmit)="onSubmit()">
    <div>
      <label for="nombrePropiedad">Nombre de la propiedad:</label>
      <input
        type="text"
        id="nombrePropiedad"
        [(ngModel)]="propiedad.nombrePropiedad"
        name="nombrePropiedad"
        required
      />
    </div>

    <div>
      <label for="descripcion">Descripción:</label>
      <textarea
        id="descripcion"
        [(ngModel)]="propiedad.descripcion"
        name="descripcion"
        required
      ></textarea>
    </div>

    <div>
      <label for="valorNoche">Valor por noche:</label>
      <input
        type="number"
        id="valorNoche"
        [(ngModel)]="propiedad.valorNoche"
        name="valorNoche"
        required
      />
    </div>

    <!-- Selector de Departamento -->
    <div>
      <label for="departamento">Departamento:</label>
      <select
        id="departamento"
        [(ngModel)]="departamentoSeleccionado"
        (change)="cargarMunicipios()"
        name="departamento"
        required
      >
        <option *ngFor="let depto of departamentos" [value]="depto.departamento">
          {{ depto.departamento }}
        </option>
      </select>
    </div>


    <div *ngIf="municipiosFiltrados.length > 0">
      <label for="municipio">Municipio:</label>
      <select id="municipio" [(ngModel)]="propiedad.municipio" name="municipio" required>
        <option *ngFor="let municipio of municipiosFiltrados" [value]="municipio">
          {{ municipio }}
        </option>
      </select>
    </div>

    <div>
      <label for="tipoIngreso">Tipo de ingreso:</label>
      <input
        type="text"
        id="tipoIngreso"
        [(ngModel)]="propiedad.tipoIngreso"
        name="tipoIngreso"
        required
      />
    </div>

    <div>
      <label for="cantidadHabitaciones">Cantidad de habitaciones:</label>
      <input
        type="number"
        id="cantidadHabitaciones"
        [(ngModel)]="propiedad.cantidadHabitaciones"
        name="cantidadHabitaciones"
        required
      />
    </div>

    <div>
      <label for="cantidadBanos">Cantidad de baños:</label>
      <input
        type="number"
        id="cantidadBanos"
        [(ngModel)]="propiedad.cantidadBanos"
        name="cantidadBanos"
        required
      />
    </div>

    <div>
      <label for="permiteMascotas">¿Permite mascotas?</label>
      <input
        type="checkbox"
        id="permiteMascotas"
        [(ngModel)]="propiedad.permiteMascotas"
        name="permiteMascotas"
      />
    </div>

    <div>
      <label for="tienePiscina">¿Tiene piscina?</label>
      <input
        type="checkbox"
        id="tienePiscina"
        [(ngModel)]="propiedad.tienePiscina"
        name="tienePiscina"
      />
    </div>

    <div>
      <label for="tieneAsador">¿Tiene asador?</label>
      <input
        type="checkbox"
        id="tieneAsador"
        [(ngModel)]="propiedad.tieneAsador"
        name="tieneAsador"
      />
    </div>

    <!-- Sección para la imagen -->
    <div>
      <label for="imagen">Agregar imagen descriptiva:</label>
      <div class="image-upload">
        <label for="file-input">
          <img
            *ngIf="!imagenSeleccionada"
            src="../../../assets/images/camera-icon.png"
            alt="Agregar imagen"
            class="camera-icon"
          />
          <img
            *ngIf="imagenSeleccionada"
            [src]="imagenSeleccionada"
            alt="Imagen seleccionada"
            class="preview-image"
          />
          <span *ngIf="!imagenSeleccionada">Haz clic para subir una imagen</span>
          <span *ngIf="imagenSeleccionada">Imagen seleccionada, haz clic para cambiarla</span>
        </label>
        <input
          id="file-input"
          type="file"
          accept="image/*"
          (change)="onFileSelected($event)"
          required
        />
      </div>
    </div>

    <button type="submit">Crear Propiedad</button>
  </form>
</div>
